<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Каталог недвижимости</title>
  <style>
    /* Сброс и базовые стили */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f7fa;
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: #3a86ff;
      color: white;
      padding: 1rem 2rem;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }
    header h1 {
      margin: 0;
      font-size: 1.6rem;
      flex-grow: 1;
      min-width: 200px;
    }
    .lang-switch {
      display: flex;
      gap: 0.5rem;
    }
    .lang-switch button {
      background: #5390d9;
      border: none;
      color: white;
      padding: 0.4rem 0.8rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    .lang-switch button.active,
    .lang-switch button:hover {
      background: #f7a072;
      color: #222;
    }

    main {
      flex-grow: 1;
      padding: 1rem 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Фильтры */
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
      justify-content: center;
    }
    .filters label {
      display: flex;
      flex-direction: column;
      font-weight: 600;
      font-size: 0.9rem;
      color: #555;
    }
    .filters input[type="search"],
    .filters select {
      margin-top: 0.3rem;
      padding: 0.4rem 0.6rem;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 1rem;
      min-width: 150px;
      transition: border-color 0.3s ease;
    }
    .filters input[type="search"]:focus,
    .filters select:focus {
      border-color: #3a86ff;
      outline: none;
    }

    /* Карточки */
    .cards-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.2rem;
    }
    .card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      overflow: hidden;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      animation: fadeInUp 0.5s ease forwards;
      opacity: 0;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 15px rgba(58, 134, 255, 0.4);
    }
    .card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      transition: transform 0.4s ease;
    }
    .card:hover img {
      transform: scale(1.05);
    }
    .card-content {
      padding: 0.8rem 1rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .card-title {
      font-size: 1.15rem;
      font-weight: 700;
      margin: 0 0 0.5rem 0;
      color: #1f2937;
    }
    .card-info {
      font-size: 0.9rem;
      margin-bottom: 0.3rem;
      color: #555;
    }
    .card-price {
      font-weight: 700;
      font-size: 1.1rem;
      color: #3a86ff;
      margin-top: auto;
    }

    /* Модальное окно */
    .modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      padding: 1rem;
      z-index: 1000;
      overflow-y: auto;
      animation: fadeIn 0.3s ease forwards;
    }
    .modal.active {
      display: flex;
    }
    .modal-content {
      background: white;
      border-radius: 10px;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      padding: 1.5rem 2rem;
      position: relative;
      animation: slideInDown 0.4s ease forwards;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    .modal-close {
      position: absolute;
      top: 10px;
      right: 15px;
      background: transparent;
      border: none;
      font-size: 1.8rem;
      cursor: pointer;
      color: #333;
      transition: color 0.3s ease;
    }
    .modal-close:hover {
      color: #3a86ff;
    }
    .modal img {
      width: 100%;
      height: 300px;
      object-fit: cover;
      border-radius: 6px;
      margin-bottom: 1rem;
    }
    .modal-details p {
      margin: 0.3rem 0;
      font-size: 1rem;
      color: #444;
    }

    /* Анимации */
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes slideInDown {
      0% {
        opacity: 0;
        transform: translateY(-30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    /* Адаптивность */
    @media (max-width: 600px) {
      header {
        flex-direction: column;
        gap: 0.8rem;
      }
      .filters {
        flex-direction: column;
        align-items: stretch;
      }
      .filters label {
        width: 100%;
      }
      .card img {
        height: 160px;
      }
      .modal-content {
        padding: 1rem;
      }
      .modal img {
        height: 200px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1 data-i18n="title">Каталог недвижимости</h1>
    <div class="lang-switch" role="group" aria-label="Выбор языка">
      <button data-lang="ru" class="active" aria-pressed="true">RU</button>
      <button data-lang="en" aria-pressed="false">EN</button>
      <button data-lang="kz" aria-pressed="false">KZ</button>
    </div>
  </header>

  <main>
    <section class="filters" aria-label="Фильтры поиска">
      <label>
        <span data-i18n="search">Поиск</span>
        <input type="search" id="search" placeholder="Например, улица, район..." aria-label="Поле поиска" />
      </label>
      <label>
        <span data-i18n="city">Город</span>
        <select id="city" aria-label="Выбор города">
          <option value="all" data-i18n="all">Все</option>
          <option value="astana">Астана</option>
          <option value="almaty">Алматы</option>
          <option value="shymkent">Шымкент</option>
        </select>
      </label>
      <label>
        <span data-i18n="type">Тип</span>
        <select id="type" aria-label="Выбор типа недвижимости">
          <option value="all" data-i18n="all">Все</option>
          <option value="apartment">Квартира</option>
          <option value="house">Дом</option>
          <option value="commercial">Коммерческая</option>
        </select>
      </label>
    </section>

    <section class="cards-container" aria-live="polite" aria-label="Список объектов недвижимости">
      <!-- Карточки будут динамически вставлены сюда -->
    </section>
  </main>

  <!-- Модальное окно -->
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" tabindex="-1">
    <div class="modal-content">
      <button class="modal-close" aria-label="Закрыть">&times;</button>
      <h2 id="modalTitle"></h2>
      <img src="" alt="" />
      <div class="modal-details"></div>
    </div>
  </div>

  <script>
    const properties = [
      {
        id: 1,
        title: {ru: 'Уютная квартира в центре', en: 'Cozy Apartment Downtown', kz: 'Орталықтағы жайлы пәтер'},
        address: 'ул. Абая, 15',
        area: 75,
        rooms: 3,
        city: 'astana',
        type: 'apartment',
        price: 8500000,
        img: 'https://images.unsplash.com/photo-1560448075-9d6d97e1543b?auto=format&fit=crop&w=800&q=60'
      },
      {
        id: 2,
        title: {ru: 'Современный дом с садом', en: 'Modern House with Garden', kz: 'Бақшасы бар заманауи үй'},
        address: 'ул. Тимирязева, 47',
        area: 150,
        rooms: 5,
        city: 'almaty',
        type: 'house',
        price: 23500000,
        img: 'https://images.unsplash.com/photo-1600585154058-4a7a4f216d5e?auto=format&fit=crop&w=800&q=60'
      },
      {
        id: 3,
        title: {ru: 'Коммерческое помещение в бизнес-центре', en: 'Commercial Space in Business Center', kz: 'Бизнес орталығындағы коммерциялық орын'},
        address: 'пр. Абылайхана, 10',
        area: 120,
        rooms: 0,
        city: 'shymkent',
        type: 'commercial',
        price: 18000000,
        img: 'https://images.unsplash.com/photo-1560184897-f858d04fca94?auto=format&fit=crop&w=800&q=60'
      },
      {
        id: 4,
        title: {ru: 'Просторная квартира с видом на парк', en: 'Spacious Apartment with Park View', kz: 'Парктің көрінісі бар кең пәтер'},
        address: 'ул. Розыбакиева, 85',
        area: 90,
        rooms: 4,
        city: 'almaty',
        type: 'apartment',
        price: 9500000,
        img: 'https://images.unsplash.com/photo-1586105251261-72a756497a9a?auto=format&fit=crop&w=800&q=60'
      },
      {
        id: 5,
        title: {ru: 'Дом в тихом районе', en: 'House in Quiet Neighborhood', kz: 'Тыныш ауданындағы үй'},
        address: 'ул. Амангельды, 21',
        area: 130,
        rooms: 4,
        city: 'astana',
        type: 'house',
        price: 21000000,
        img: 'https://images.unsplash.com/photo-1570129477492-45c003edd2be?auto=format&fit=crop&w=800&q=60'
      }
    ];

    const texts = {
      ru: {
        title: 'Каталог недвижимости',
        search: 'Поиск',
        city: 'Город',
        type: 'Тип',
        all: 'Все',
        details: {
          address: 'Адрес',
          area: 'Площадь',
          rooms: 'Комнат',
          city: 'Город',
          type: 'Тип',
          price: 'Цена'
        },
        cityOptions: {
          astana: 'Астана',
          almaty: 'Алматы',
          shymkent: 'Шымкент'
        },
        typeOptions: {
          apartment: 'Квартира',
          house: 'Дом',
          commercial: 'Коммерческая'
        }
      },
      en: {
        title: 'Property Catalog',
        search: 'Search',
        city: 'City',
        type: 'Type',
        all: 'All',
        details: {
          address: 'Address',
          area: 'Area',
          rooms: 'Rooms',
          city: 'City',
          type: 'Type',
          price: 'Price'
        },
        cityOptions: {
          astana: 'Astana',
          almaty: 'Almaty',
          shymkent: 'Shymkent'
        },
        typeOptions: {
          apartment: 'Apartment',
          house: 'House',
          commercial: 'Commercial'
        }
      },
      kz: {
        title: 'Жылжымайтын мүлік каталогы',
        search: 'Іздеу',
        city: 'Қала',
        type: 'Түрі',
        all: 'Барлығы',
        details: {
          address: 'Мекенжай',
          area: 'Аудан',
          rooms: 'Бөлмелер',
          city: 'Қала',
          type: 'Түрі',
          price: 'Бағасы'
        },
        cityOptions: {
          astana: 'Астана',
          almaty: 'Алматы',
          shymkent: 'Шымкент'
        },
        typeOptions: {
          apartment: 'Пәтер',
          house: 'Үй',
          commercial: 'Коммерциялық'
        }
      }
    };

    const cardsContainer = document.querySelector('.cards-container');
    const searchEl = document.getElementById('search');
    const citySelect = document.getElementById('city');
    const typeSelect = document.getElementById('type');
    const langButtons = document.querySelectorAll('.lang-switch button');
    const modal = document.querySelector('.modal');
    const modalTitle = modal.querySelector('#modalTitle');
    const modalImg = modal.querySelector('img');
    const modalDetails = modal.querySelector('.modal-details');
    const modalCloseBtn = modal.querySelector('.modal-close');

    let currentLang = 'ru';

    // Отрисовка карточек недвижимости
    function renderCards(items) {
      cardsContainer.innerHTML = '';
      if (items.length === 0) {
        const emptyMsg = document.createElement('p');
        emptyMsg.textContent = currentLang === 'ru' ? 'Объекты не найдены.' : (currentLang === 'en' ? 'No properties found.' : 'Нысандар табылмады.');
        cardsContainer.appendChild(emptyMsg);
        return;
      }
      items.forEach((item, index) => {
        const card = document.createElement('article');
        card.classList.add('card');
        card.style.animationDelay = `${index * 0.1}s`;
        card.setAttribute('tabindex', '0');
        card.setAttribute('role', 'button');
        card.setAttribute('aria-pressed', 'false');
        card.setAttribute('aria-label', `${item.title[currentLang]}, ${texts[currentLang].typeOptions[item.type]}, ${texts[currentLang].cityOptions[item.city]}, ${item.price.toLocaleString()} тг`);

        card.innerHTML = `
          <img src="${item.img}" alt="${item.title[currentLang]}" loading="lazy" />
          <div class="card-content">
            <h3 class="card-title">${item.title[currentLang]}</h3>
            <p class="card-info">${texts[currentLang].details.address}: ${item.address}</p>
            <p class="card-info">${texts[currentLang].details.area}: ${item.area} м²</p>
            <p class="card-info">${texts[currentLang].details.rooms}: ${item.rooms > 0 ? item.rooms : '-'}</p>
            <p class="card-price">${item.price.toLocaleString()} ₸</p>
          </div>
        `;

        card.addEventListener('click', () => openModal(item));
        card.addEventListener('keydown', e => {
          if(e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            openModal(item);
          }
        });

        cardsContainer.appendChild(card);
      });
    }

    // Фильтрация по введенным параметрам
    function filterProperties() {
      const searchTerm = searchEl.value.trim().toLowerCase();
      const cityValue = citySelect.value;
      const typeValue = typeSelect.value;

      let filtered = properties.filter(p => {
        let matchesSearch = p.title[currentLang].toLowerCase().includes(searchTerm) || p.address.toLowerCase().includes(searchTerm);
        let matchesCity = cityValue === 'all' || p.city === cityValue;
        let matchesType = typeValue === 'all' || p.type === typeValue;

        return matchesSearch && matchesCity && matchesType;
      });

      renderCards(filtered);
    }

    // Открыть модальное окно с подробной информацией
    function openModal(property) {
      modalTitle.textContent = property.title[currentLang];
      modalImg.src = property.img;
      modalImg.alt = property.title[currentLang];

      modalDetails.innerHTML = `
        <p><strong>${texts[currentLang].details.address}:</strong> ${property.address}</p>
        <p><strong>${texts[currentLang].details.area}:</strong> ${property.area} м²</p>
        <p><strong>${texts[currentLang].details.rooms}:</strong> ${property.rooms > 0 ? property.rooms : '-'}</p>
        <p><strong>${texts[currentLang].details.city}:</strong> ${texts[currentLang].cityOptions[property.city]}</p>
        <p><strong>${texts[currentLang].details.type}:</strong> ${texts[currentLang].typeOptions[property.type]}</p>
        <p><strong>${texts[currentLang].details.price}:</strong> ${property.price.toLocaleString()} ₸</p>
      `;

      modal.classList.add('active');
      modal.setAttribute('tabindex', '0');
      modal.focus();
      document.body.style.overflow = 'hidden'; // Запретить прокрутку фона
    }

    // Закрыть модальное окно
    function closeModal() {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    modalCloseBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', e => {
      if (e.target === modal) closeModal();
    });
    document.addEventListener('keydown', e => {
      if(e.key === 'Escape' && modal.classList.contains('active')) {
        closeModal();
      }
    });

    // Переключение языка
    function switchLanguage(lang) {
      if (!texts[lang]) return;

      currentLang = lang;

      // Обновить тексты в интерфейсе
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (texts[lang][key]) {
          el.textContent = texts[lang][key];
        }
      });

      // Обновить плейсхолдеры и опции селектов
      searchEl.placeholder = texts[lang].search + '...';
      // Обновляем опции select городов
      for (const option of citySelect.options) {
        const val = option.value;
        if (val === 'all') {
          option.textContent = texts[lang].all;
        } else if (texts[lang].cityOptions[val]) {
          option.textContent = texts[lang].cityOptions[val];
        }
      }
      // Обновляем опции select типов
      for (const option of typeSelect.options) {
        const val = option.value;
        if (val === 'all') {
          option.textContent = texts[lang].all;
        } else if (texts[lang].typeOptions[val]) {
          option.textContent = texts[lang].typeOptions[val];
        }
      }

      // Обновляем активную кнопку
      langButtons.forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
        btn.setAttribute('aria-pressed', btn.dataset.lang === lang);
      });

      filterProperties();
    }

    // События фильтров и поиска
    searchEl.addEventListener('input', filterProperties);
    citySelect.addEventListener('change', filterProperties);
    typeSelect.addEventListener('change', filterProperties);

    // События переключения языка
    langButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        switchLanguage(btn.dataset.lang);
      });
    });

    // Инициализация
    switchLanguage(currentLang);
  </script>
</body>
</html>
